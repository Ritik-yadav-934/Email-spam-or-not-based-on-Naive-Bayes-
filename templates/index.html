<!DOCTYPE html>
<html>
<head>
    <title>Spam Email Detector</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="box">
    <h2>Spam Email Detector</h2>

    <textarea id="text" placeholder="Enter email text..."></textarea>
    <button onclick="predict()">Check Spam</button>

    <p id="result"></p>
</div>

<script>
async function predict() {
    const text = document.getElementById("text").value;
    const resultDiv = document.getElementById("result");

    if (!text) {
        resultDiv.innerText = "Please enter text!";
        return;
    }

    resultDiv.innerText = "Checking...";

    try {
        const response = await fetch(
            "https://email-spam-or-not-based-on-naive-bayes.onrender.com/predict",
            {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ text })
            }
        );

        const data = await response.json();

        resultDiv.innerText =
            `Prediction: ${data.prediction} (Spam Probability: ${data.spam_probability})`;

    } catch (error) {
        resultDiv.innerText = "Server error. Try again.";
        console.error(error);
    }
}
</script>

</body>
</html>
